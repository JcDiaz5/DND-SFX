{% extends "base.html" %}
{% block title %}Profile{% endblock %}
{% block content %}
<div class="profile-page">
    <h1>Profile</h1>
    <div class="profile-section">
        <h2>Account</h2>
        <form id="profile-form">
            <div class="form-group">
                <label>First name</label>
                <input type="text" id="first_name" name="first_name" required>
            </div>
            <div class="form-group">
                <label>Last name</label>
                <input type="text" id="last_name" name="last_name" required>
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="email" name="email" required>
            </div>
            <p class="form-error" id="profile-error" hidden></p>
            <p class="form-success" id="profile-success" hidden></p>
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Save changes</button>
            </div>
        </form>
    </div>
    <div id="email-verify-modal" class="modal-overlay" hidden aria-hidden="true">
        <div class="modal-content">
            <h2 class="modal-title">Verify your new email</h2>
            <p class="modal-body" id="email-verify-message">We've sent a verification code to your new email. Enter it below.</p>
            <div class="form-group">
                <label for="email-verify-code">Verification code</label>
                <input type="text" id="email-verify-code" class="modal-input" placeholder="000000" maxlength="6" pattern="[0-9]*" inputmode="numeric" autocomplete="one-time-code" aria-label="Verification code">
            </div>
            <p class="form-error" id="email-verify-error" hidden></p>
            <div class="modal-actions">
                <button type="button" class="btn btn-ghost" id="email-verify-cancel">Cancel</button>
                <button type="button" class="btn btn-primary" id="email-verify-submit">Verify and save</button>
            </div>
        </div>
    </div>
    <div class="profile-section">
        <h2>Saved session lists</h2>
        <div id="profile-session-lists" class="session-lists-list"></div>
        <p id="profile-no-lists" class="form-error" style="margin-top:0.5rem;" hidden>No saved lists.</p>
    </div>
    <div class="profile-section">
        <h2>Change password</h2>
        <form id="password-form">
            <div class="form-group">
                <label>Current password</label>
                <input type="password" id="current_password" required>
            </div>
            <div class="form-group">
                <label>New password</label>
                <input type="password" id="new_password" required placeholder="At least 8 characters, upper, lower, number">
            </div>
            <p class="form-error" id="password-error" hidden></p>
            <p class="form-success" id="password-success" hidden></p>
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Change password</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}
